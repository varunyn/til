{"pageProps":{"title":"Building docker image for python app","date":"2021-06-21T00:00:00.000Z","desc":"How to create Docker image for Python application and run sample application","tags":["docker","python","ðŸŒ¿"],"readingTime":{"text":"1 min read","minutes":0.44,"time":26400,"words":88},"content":{"compiledSource":"var l=Object.defineProperty,d=Object.defineProperties;var u=Object.getOwnPropertyDescriptors;var t=Object.getOwnPropertySymbols;var o=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;var r=(e,n,p)=>n in e?l(e,n,{enumerable:!0,configurable:!0,writable:!0,value:p}):e[n]=p,a=(e,n)=>{for(var p in n||(n={}))o.call(n,p)&&r(e,p,n[p]);if(t)for(var p of t(n))c.call(n,p)&&r(e,p,n[p]);return e},m=(e,n)=>d(e,u(n));var N=(e,n)=>{var p={};for(var s in e)o.call(e,s)&&n.indexOf(s)<0&&(p[s]=e[s]);if(e!=null&&t)for(var s of t(e))n.indexOf(s)<0&&c.call(e,s)&&(p[s]=e[s]);return p};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(p){var s=p,{components:e}=s,n=N(s,[\"components\"]);return mdx(MDXLayout,m(a(a({},layoutProps),n),{components:e,mdxType:\"MDXLayout\"}),mdx(\"p\",null,\"Dockerfile\"),mdx(\"pre\",a({},{className:\"language-docker\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-docker\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"FROM\"),\" python\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\":\"),\"3.9\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"-\"),`slim\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"WORKDIR\"),` /app\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"COPY\"),` . /app\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"RUN\"),\" pip install \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"-\"),`r requirements.txt\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"ENTRYPOINT\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"python\"'),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"CMD\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"[\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"app.py\"'),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"]\"),`\n`)),mdx(\"p\",null,\"Sample Flask app to try containerize\"),mdx(\"pre\",a({},{className:\"language-python\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-python\"}),mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"from\"),\" flask \",mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"import\"),` Flask\n\napp `,mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" Flask\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"__name__\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),`\n\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token decorator annotation punctuation\"}),\"@app\",mdx(\"span\",a({parentName:\"span\"},{className:\"token punctuation\"}),\".\"),\"route\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"/\"'),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),`\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"def\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token function\"}),\"hello_world\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\":\"),`\n    `,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"return\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"<p>Hello, World!</p>\"'),`\n\nport `,mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token number\"}),\"5100\"),`\n\n`,mdx(\"span\",a({parentName:\"code\"},{className:\"token keyword\"}),\"if\"),\" __name__ \",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"==\"),\" \",mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),\"'__main__'\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\":\"),`\n    app`,mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\".\"),\"run\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\"(\"),\"host\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\"),mdx(\"span\",a({parentName:\"code\"},{className:\"token string\"}),'\"0.0.0.0\"'),mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\",\"),\" port\",mdx(\"span\",a({parentName:\"code\"},{className:\"token operator\"}),\"=\"),\"port\",mdx(\"span\",a({parentName:\"code\"},{className:\"token punctuation\"}),\")\"),`\n\n`)),mdx(\"p\",null,\"and then start the app using\"),mdx(\"pre\",a({},{className:\"language-shell\"}),mdx(\"code\",a({parentName:\"pre\"},{className:\"language-shell\"}),`python app.py\n`)),mdx(\"p\",null,\"I am using slim image instead of alpine. Good \",mdx(\"a\",a({parentName:\"p\"},{href:\"https://pythonspeed.com/articles/alpine-docker-python/\"}),\"article\"),` on why not to use alpine for python.\nOfficial Docker `,mdx(\"a\",a({parentName:\"p\"},{href:\"https://docs.docker.com/language/python/build-images/\"}),\"docs\"),\" for building python image.\"))}MDXContent.isMDXComponent=!0;\n","scope":{}},"tweetIDs":[],"slug":"docker-image-for-python","tweets":null},"__N_SSG":true}